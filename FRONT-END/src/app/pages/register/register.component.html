<div class="bg">
    <div class="container-fluid d-flex justify-content-center align-items-center h-100">
        <div *ngIf="!errorRegister" class="box card p-3 py-4">
            <h4 class="titulo">Registrate</h4>
            <form [formGroup]="form" (ngSubmit)="onEnviar($event,usuario)" autocomplete="off" novalidate>
                <table class="col-12 form-group">
                    <tr style="display: flex; justify-content: space-between;">
                        <td style="min-width: 47.5%; padding-right: 10px;">
                            <small id="nombre" class="form-text text-white">  Ingrese su nombre:</small>
                            <input type="text" style="color: white;" class="form-control casilla2" formControlName="nombre" [(ngModel)]="usuario.nombre">
                            <div *ngIf="nombreField?.errors && nombreInvalid" class="text-danger">
                                <p *ngIf="nombreField?.hasError('required')">
                                    El nombre es requerido.
                                </p>
                                <p *ngIf="nombreField?.hasError('minlength')">
                                    Mínimo 3 caracteres.
                                </p>
                            </div>
                        </td>

                        <td style="min-width: 47.5%;"> 
                            <small id="apellido" class="form-text text-white">  Ingrese su apellido:</small>
                            <input type="text" style="color: white;" class="form-control casilla2" formControlName="apellido" [(ngModel)]="usuario.apellido" />
                            <div *ngIf="apellidoField?.errors  && apellidoInvalid" class="text-danger">
                                <p *ngIf="apellidoField?.hasError('required')">
                                    El apellido es requerido.
                                </p>
                                <p *ngIf="apellidoField?.hasError('minlength')">
                                    Mínimo 3 caracteres.
                                </p>
                            </div>
                        </td>
                    </tr>
                </table>
                <table class="col-12 form-group">
                    <tr style="display: flex; justify-content: space-between;">
                        <td style="min-width: 47.5%; padding-right: 10px;">
                            <small id="dnilHelp" class="form-text text-white">  Ingresa su n° de DNI</small>
                            <input type="number" style="color: white;" class="form-control casilla2" formControlName="dni" [(ngModel)]="usuario.dni" />
                            <div *ngIf="dniField?.errors && dniInvalid" class="text-danger">
                                <p *ngIf="dniField?.hasError('required')">
                                    El DNI es requerido.
                                </p>
                                <p *ngIf="dniField?.hasError('minlength')">
                                    Mínimo 7 caracteres.
                                </p>
                                <p *ngIf="dniField?.hasError('maxlength')">
                                    Máximo 8 caracteres.
                                </p>
                            </div>
                        </td>
                        <td style="min-width: 47.5%;">
                            <small id="nacimiento" class="form-text text-white"> Fecha de Nac.:</small>
                            <input type="date" style="color: white;" class="form-control casilla2 text-white" placeholder="Fecha de Nacimiento" formControlName="nacimiento" [(ngModel)]="usuario.fechaNacimiento" />
                            <div *ngIf="nacimientoField?.errors  && nacimientoInvalid" class="text-danger">
                                <p *ngIf="nacimientoField?.hasError('required')">
                                    La fecha de nacimiento es requerida.
                                </p>
                            </div>
                        </td>
                    </tr>
                </table>
                <table class="col-12 form-group">
                    <tr style="display: flex; justify-content: space-between;">
                        <td style="min-width: 47.5%; padding-right: 10px;">
                            <small id="cuitHelp" class="form-text text-white"> Ingrese CUIL sin -</small>
                            <input type="text" style="color: white;" class="form-control casilla2" formControlName="cuil" [(ngModel)]="usuario.cuil" />
                            <div *ngIf="cuilField?.errors && cuilInvalid" class="text-danger">
                                <p *ngIf="cuilField?.hasError('required')">
                                    El cuil es requerido.
                                </p>
                                <p *ngIf="cuilField?.hasError('minlength')">
                                    Mínimo 11 caracteres.
                                </p>
                                <p *ngIf="cuilField?.hasError('maxlength')">
                                    Máximo 11 caracteres.
                                </p>
                            </div>

                        </td>
                        <td style="min-width: 47.5%;">
                            <small id="sexo" class="form-text text-white"> Ingrese su género:</small>
                            <select class="custom-select form-control casilla2 text-white" (change)="onSelectGenero($any($event.target).value)">
                                <option value="Femenino">Femenino</option>
                                <option value="Masculino">Masculino</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </td>
                    </tr>
                </table>

                <table class="col-12 form-group">
                    <tr style="display: flex; justify-content: space-between;">
                        <td style="min-width: 47.5%; margin-right: 20px; padding-right: 10px;">
                            <small id="nacionalidad" class="form-text text-white">  Nacionalidad:</small>
                            <select class="custom-select form-control casilla2 text-white " (change)="onSelectNacionalidad($any($event.target).value)">
                                <option value="Argentina">Argentina</option>
                                <option value="Boliviana">Boliviana</option>
                                <option value="Brasilera">Brasilera</option>
                                <option value="Chilena">Chilena</option>
                                <option value="Paraguaya">Paraguaya</option>
                                <option value="Uruguaya">Uruguaya</option>
                                <option value="Otra">Otra</option>
                            </select>
                        </td>

                        <td style="min-width: 47.5%;">
                            <small id="pais" class="form-text text-white">  Pais:</small>
                            <select class="custom-select form-control casilla2 text-white" (change)="onSelectPais($any($event.target).value)">
                                <option *ngFor="let pais of paises" value={{pais.Id}}>
                                    {{pais.Nombre}}
                                </option>
                            </select>
                        </td>
                    </tr>
                </table>
                <table class="col-12 form-group">
                    <tr style="display: flex; justify-content: space-between;">
                        <td style="min-width: 47.5%; margin-right: 20px; padding-right: 10px;">
                            <small id="provincia" class="form-text text-white">  Provincia:</small>
                            <select class="custom-select form-control casilla2 text-white" (change)="onSelectProvincia($any($event.target).value)">
                                <option *ngFor="let prov of provincias" value={{prov.Id}}>
                                    {{prov.Nombre}}
                                </option>
                            </select>
                        </td>
                        <td style="min-width: 47.5%;">
                            <small id="localidad" class="form-text text-white"> Localidad:</small>
                            <select class="custom-select form-control casilla2 text-white" (change)="onSelectLocalidad($any($event.target).value)">
                                <option *ngFor="let loc of localidades" value={{loc.Id}}>
                                    {{loc.Nombre}}
                                </option>
                            </select>
                        </td>
                    </tr>
                </table>
                <div class="form-group">
                    <small id="domicilio" class="form-text text-white">  Ingrese su Domicilio.</small>
                    <input type="text" style="color: white;" class="form-control casilla2" formControlName="domicilio" placeholder="Por ej: Av. Colon 457" [(ngModel)]="usuario.domicilio" />
                    <div *ngIf="domicilioField?.errors  && domicilioInvalid" class="text-danger">
                        <p *ngIf="domiclioField?.hasError('required')">
                            El domicilio es requerido.
                        </p>
                        <p *ngIf="cuilField?.hasError('minlength')">
                            Mínimo 3 caracteres.
                        </p>
                    </div>
                </div>
                <div class="form-group">
                    <small id="email" class="form-text text-white">  Ingrese su E-mail.</small>
                    <input type="email" style="color: white;" class="form-control casilla2" formControlName="email" [(ngModel)]="usuario.email" />
                    <div *ngIf="mailField?.errors  && mailInvalid" class="text-danger">
                        <p *ngIf="mailField?.hasError('required')">
                            El email es requerido.
                        </p>
                        <p *ngIf="mailField?.hasError('email')">
                            El formato del email debe ser válido.
                        </p>
                    </div>
                </div>
                <div class="form-group">
                    <small id="contrasena" class="form-text text-white"> Contraseña.</small>
                    <input type="password" style="color: white;" class="form-control casilla2" formControlName="contrasena" [(ngModel)]="usuario.contrasena"/>
                    <small id="passwordlHelp" class="form-text text-muted">Debe tener entre 8 y 15 caracteres.</small>
                    <div *ngIf="passField?.errors && passInvalid" class="text-danger">
                        <p *ngIf="passField?.hasError('required')">
                            La contraseña es requerida.
                        </p>
                        <p *ngIf="passField?.hasError('minlength')">
                            Mínimo 8 caracteres.
                        </p>
                        <p *ngIf="passField?.hasError('maxlength')">
                            Máximo 15 caracteres.
                        </p>
                    </div>
                </div>
                <div class="form-group">
                    <small id="contrasena2" class="form-text text-white"> Reingrese la contraseña</small>
                    <input type="password" style="color: white;" class="form-control casilla2" formControlName="contrasena2" [(ngModel)]="contrasena2"/>
                    <small id="passwordlHelp" class="form-text text-muted">Debe tener entre 8 y 15 caracteres.</small>
                    <div *ngIf="checkPassField?.errors && pass2Invalid" class="text-danger">
                        <p *ngIf="checkPassField?.hasError('required')">
                            La contraseña es requerida.
                        </p>
                        <p *ngIf="checkPassField?.hasError('minlength')">
                            Mínimo 8 caracteres.
                        </p>
                        <p *ngIf="checkPassField?.hasError('maxlength')">
                            Máximo 15 caracteres.
                        </p>
                    </div>
                    <p *ngIf="!checkPass" class="text-danger">
                        Las contraseñas deben ser iguales.
                    </p>
                </div>
                <div class="col-12">
                    <label class="form-label" for="customFile" style="color: white">Adjunta aqui una captura de su DNI</label>
                    <input type="file" class="form-control" id="customFile" />
                </div>
                <br>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="true" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1" style="color:white">
                    Acepto los <a href="#">terminos y condiciones</a>
                </label>
                </div>
                <br>
                <button class="btn btn-lg text-white" type="submit" [disabled]="form.invalid">Registrarse</button>  
                <br>
                <span style="color: white;">Ya tienes una cuenta?</span>
                <a href="/iniciosesion" class="text-decoration-none"> Iniciar sesión</a>
            </form>
        </div>
        <div *ngIf="errorRegister" class="box btn-primary card p-5 text-white text-center" style="margin-top: 100px;">
            <h3 class="text-danger">Atención!!</h3>
            Ocurrió un error en el proceso de registro.
            <br>
            <strong style="letter-spacing: 1px;">
                Por favor intentelo nuevamente
            </strong>
            <br>
            <button class="btn-lg boton text-white" style="display: block; margin: auto;" (click)="mostrarRegistro()"> Ir al Registro</button>
        </div>
    </div>
</div>